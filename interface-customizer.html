<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Personaliza√ß√£o de Interface - EcoGear</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    .customizer-header {
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      color: white;
      padding: 2rem;
      border-radius: 16px;
      margin-bottom: 2rem;
    }

    .customization-panel {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
      margin-bottom: 2rem;
    }

    .theme-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin: 1rem 0;
    }

    .theme-option {
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      padding: 1rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }

    .theme-option:hover {
      border-color: #6366f1;
      transform: scale(1.02);
    }

    .theme-option.selected {
      border-color: #6366f1;
      background: #f0f9ff;
    }

    .layout-preview {
      width: 100%;
      height: 200px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      background: #f8fafc;
      margin: 1rem 0;
      position: relative;
      overflow: hidden;
    }

    .module-toggle {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
      background: #f8fafc;
      border-radius: 8px;
      margin: 0.5rem 0;
      border: 1px solid #e2e8f0;
    }

    .toggle-switch {
      position: relative;
      width: 50px;
      height: 24px;
      background: #e5e7eb;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .toggle-switch.active {
      background: #22c55e;
    }

    .toggle-switch::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      transition: transform 0.2s;
    }

    .toggle-switch.active::after {
      transform: translateX(26px);
    }

    .customization-preview {
      position: sticky;
      top: 2rem;
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
    }
  </style>
</head>
<body>
<header class="topbar">
  <a class="brand" href="index.html">EcoGear</a>
  <nav>
    <a href="shop-grid.html">Loja</a>
    <a href="interface-customizer.html">Personalizar</a>
  </nav>
  <div class="top-actions">
    <span id="userTypeIndicator" style="padding: 0.3rem 0.8rem; border-radius: 20px; font-weight: bold;">CLIENTE</span>
  </div>
</header>

<main class="container">
  <div class="customizer-header">
    <h1>üé® Personaliza√ß√£o de Interface</h1>
    <p>Customize sua experi√™ncia no EcoGear de acordo com suas prefer√™ncias</p>
  </div>

  <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
    <div>
      <div class="customization-panel">
        <h3>üé≠ Tema Visual</h3>
        <div class="theme-selector">
          <div class="theme-option selected" data-theme="light">
            <div style="width: 100%; height: 60px; background: linear-gradient(135deg, #fff 0%, #f8fafc 100%); border-radius: 4px; margin-bottom: 0.5rem;"></div>
            <strong>Claro</strong>
          </div>
          <div class="theme-option" data-theme="dark">
            <div style="width: 100%; height: 60px; background: linear-gradient(135deg, #111 0%, #374151 100%); border-radius: 4px; margin-bottom: 0.5rem;"></div>
            <strong>Escuro</strong>
          </div>
          <div class="theme-option" data-theme="eco">
            <div style="width: 100%; height: 60px; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); border-radius: 4px; margin-bottom: 0.5rem;"></div>
            <strong>Eco</strong>
          </div>
          <div class="theme-option" data-theme="vintage">
            <div style="width: 100%; height: 60px; background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); border-radius: 4px; margin-bottom: 0.5rem;"></div>
            <strong>Vintage</strong>
          </div>
        </div>
      </div>

      <div class="customization-panel">
        <h3>üìê Layout dos Produtos</h3>
        <div style="display: flex; gap: 1rem; margin: 1rem 0;">
          <label style="display: flex; align-items: center; gap: 0.5rem;">
            <input type="radio" name="layout" value="grid" checked>
            <span>Grade</span>
          </label>
          <label style="display: flex; align-items: center; gap: 0.5rem;">
            <input type="radio" name="layout" value="list">
            <span>Lista</span>
          </label>
          <label style="display: flex; align-items: center; gap: 0.5rem;">
            <input type="radio" name="layout" value="cards">
            <span>Cart√µes</span>
          </label>
        </div>
        <div class="layout-preview" id="layoutPreview">
          <div style="position: absolute; top: 10px; left: 10px; right: 10px; bottom: 10px; background: white; border-radius: 4px; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px; padding: 10px;">
            <div style="background: #e5e7eb; border-radius: 4px;"></div>
            <div style="background: #e5e7eb; border-radius: 4px;"></div>
            <div style="background: #e5e7eb; border-radius: 4px;"></div>
          </div>
        </div>
      </div>

      <div class="customization-panel" data-permission="manage_inventory">
        <h3>üîß M√≥dulos Dispon√≠veis</h3>
        <p>Ative ou desative funcionalidades espec√≠ficas para sua conta</p>
        
        <div id="moduleToggles">
          <div class="module-toggle">
            <div>
              <strong>An√°lise de Tend√™ncias</strong><br>
              <small>Receba insights sobre tend√™ncias de moda</small>
            </div>
            <div class="toggle-switch active" data-module="trend_analysis"></div>
          </div>
          
          <div class="module-toggle" data-feature="quality_control">
            <div>
              <strong>Controle de Qualidade Avan√ßado</strong><br>
              <small>Ferramentas de avalia√ß√£o detalhada</small>
            </div>
            <div class="toggle-switch" data-module="quality_control"></div>
          </div>
          
          <div class="module-toggle" data-feature="vintage_authentication">
            <div>
              <strong>Autentica√ß√£o Vintage</strong><br>
              <small>Sistema de verifica√ß√£o de autenticidade</small>
            </div>
            <div class="toggle-switch" data-module="authentication_system"></div>
          </div>
          
          <div class="module-toggle" data-feature="vip_chat">
            <div>
              <strong>Suporte VIP</strong><br>
              <small>Chat priorit√°rio com especialistas</small>
            </div>
            <div class="toggle-switch" data-module="vip_concierge"></div>
          </div>
        </div>
      </div>

      <div class="customization-panel">
        <h3>‚öôÔ∏è Prefer√™ncias Avan√ßadas</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
          <label>Densidade da Interface
            <select id="density">
              <option>Compacta</option>
              <option selected>Confort√°vel</option>
              <option>Espa√ßosa</option>
            </select>
          </label>
          <label>Idioma
            <select id="language">
              <option selected>Portugu√™s (BR)</option>
              <option>English (US)</option>
              <option>Espa√±ol (ES)</option>
            </select>
          </label>
        </div>
        
        <div style="margin-top: 1.5rem;">
          <label style="display: flex; align-items: center; gap: 0.5rem;">
            <input type="checkbox" id="animations" checked>
            <span>Ativar anima√ß√µes</span>
          </label>
          <label style="display: flex; align-items: center; gap: 0.5rem;">
            <input type="checkbox" id="notifications" checked>
            <span>Receber notifica√ß√µes</span>
          </label>
          <label style="display: flex; align-items: center; gap: 0.5rem;">
            <input type="checkbox" id="autoSave">
            <span>Salvar automaticamente</span>
          </label>
        </div>
      </div>
    </div>

    <div class="customization-preview">
      <h3>üëÅÔ∏è Pr√©-visualiza√ß√£o</h3>
      <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 1rem; background: #f8fafc;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding: 0.5rem; background: #111; color: white; border-radius: 4px;">
          <span>EcoGear</span>
          <span>Loja</span>
        </div>
        <div id="previewContent">
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem;">
            <div style="background: #e5e7eb; height: 60px; border-radius: 4px;"></div>
            <div style="background: #e5e7eb; height: 60px; border-radius: 4px;"></div>
          </div>
        </div>
      </div>
      
      <button class="btn" id="applyChanges" style="width: 100%; margin-top: 1rem;">
        Aplicar Mudan√ßas
      </button>
      <button class="btn alt" id="resetDefaults" style="width: 100%; margin-top: 0.5rem;">
        Restaurar Padr√£o
      </button>
    </div>
  </div>
</main>

<script src="script.js"></script>
<script src="user-access-manager.js"></script>
<script>
// Atualizar indicador do tipo de usu√°rio
const user = UserAccessManager.getCurrentUser();
document.getElementById('userTypeIndicator').textContent = user.name.toUpperCase();
document.getElementById('userTypeIndicator').style.background = user.color;

// Gerenciar sele√ß√£o de tema
document.querySelectorAll('.theme-option').forEach(option => {
  option.onclick = function() {
    document.querySelectorAll('.theme-option').forEach(o => o.classList.remove('selected'));
    this.classList.add('selected');
    updatePreview();
  };
});

// Gerenciar toggles de m√≥dulos
document.querySelectorAll('.toggle-switch').forEach(toggle => {
  toggle.onclick = function() {
    this.classList.toggle('active');
    updatePreview();
  };
});

// Gerenciar mudan√ßas de layout
document.querySelectorAll('input[name="layout"]').forEach(radio => {
  radio.onchange = function() {
    updateLayoutPreview(this.value);
    updatePreview();
  };
});

function updateLayoutPreview(layout) {
  const preview = document.getElementById('layoutPreview');
  const content = preview.querySelector('div');
  
  switch(layout) {
    case 'grid':
      content.style.gridTemplateColumns = '1fr 1fr 1fr';
      break;
    case 'list':
      content.style.gridTemplateColumns = '1fr';
      break;
    case 'cards':
      content.style.gridTemplateColumns = '1fr 1fr';
      break;
  }
}

function updatePreview() {
  const selectedTheme = document.querySelector('.theme-option.selected').dataset.theme;
  const previewContent = document.getElementById('previewContent');
  
  // Atualizar cores baseado no tema
  const themeColors = {
    light: { bg: '#fff', accent: '#3b82f6' },
    dark: { bg: '#111', accent: '#6366f1' },
    eco: { bg: '#f0fdf4', accent: '#22c55e' },
    vintage: { bg: '#faf5ff', accent: '#8b5cf6' }
  };
  
  const colors = themeColors[selectedTheme];
  previewContent.style.background = colors.bg;
  previewContent.querySelectorAll('div').forEach(div => {
    if (div.style.background === 'rgb(229, 231, 235)') {
      div.style.background = colors.accent;
    }
  });
}

document.getElementById('applyChanges').onclick = function() {
  const selectedTheme = document.querySelector('.theme-option.selected').dataset.theme;
  const selectedLayout = document.querySelector('input[name="layout"]:checked').value;
  const density = document.getElementById('density').value;
  
  const customizations = {
    theme: selectedTheme,
    layout: selectedLayout,
    density: density,
    animations: document.getElementById('animations').checked,
    notifications: document.getElementById('notifications').checked,
    autoSave: document.getElementById('autoSave').checked
  };
  
  UserAccessManager.enableCustomization('current', customizations);
  alert('Personaliza√ß√µes aplicadas com sucesso!');
};

document.getElementById('resetDefaults').onclick = function() {
  if (confirm('Restaurar todas as configura√ß√µes para o padr√£o?')) {
    localStorage.removeItem('userCustomConfig');
    location.reload();
  }
};

// Inicializar com configura√ß√µes salvas
const savedConfig = JSON.parse(localStorage.getItem('userCustomConfig') || '{}');
if (savedConfig.theme) {
  document.querySelectorAll('.theme-option').forEach(o => o.classList.remove('selected'));
  document.querySelector(`[data-theme="${savedConfig.theme}"]`).classList.add('selected');
}
if (savedConfig.layout) {
  document.querySelector(`input[value="${savedConfig.layout}"]`).checked = true;
  updateLayoutPreview(savedConfig.layout);
}

updatePreview();
</script>
</body>
</html>
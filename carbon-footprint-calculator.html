<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calculadora de Pegada de Carbono - EcoGear</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    .calculator-header {
      background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
      color: white;
      padding: 2rem;
      border-radius: 16px;
      margin-bottom: 2rem;
      position: relative;
    }

    .calculator-workspace {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin: 2rem 0;
    }

    .input-panel {
      background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
      border-radius: 12px;
      padding: 2rem;
      border: 2px solid #22c55e;
    }

    .results-panel {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .material-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 1rem;
      margin: 1rem 0;
    }

    .material-option {
      background: white;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      padding: 1rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }

    .material-option:hover {
      border-color: #22c55e;
      background: #f0fdf4;
    }

    .material-option.selected {
      border-color: #22c55e;
      background: #16a34a;
      color: white;
    }

    .impact-visualization {
      width: 100%;
      height: 200px;
      background: linear-gradient(90deg, #22c55e 0%, #fbbf24 50%, #ef4444 100%);
      border-radius: 8px;
      position: relative;
      margin: 1rem 0;
      overflow: hidden;
    }

    .impact-marker {
      position: absolute;
      top: -10px;
      width: 4px;
      height: 220px;
      background: #111;
      border-radius: 2px;
      transition: left 0.5s ease;
    }

    .impact-scale {
      display: flex;
      justify-content: space-between;
      margin-top: 0.5rem;
      font-size: 0.8rem;
      color: #666;
    }

    .carbon-result {
      background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
      border-radius: 12px;
      padding: 2rem;
      margin: 1rem 0;
      text-align: center;
      border: 2px solid #22c55e;
    }

    .comparison-chart {
      background: #f8fafc;
      border-radius: 8px;
      padding: 1.5rem;
      margin: 1rem 0;
    }

    .sustainability-score {
      display: inline-block;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: bold;
      color: white;
    }

    .score-excellent { background: #22c55e; }
    .score-good { background: #fbbf24; }
    .score-fair { background: #f59e0b; }
    .score-poor { background: #ef4444; }

    .lifecycle-analysis {
      background: white;
      border-radius: 8px;
      padding: 1.5rem;
      margin: 1rem 0;
      border: 1px solid #e5e7eb;
    }

    .phase-indicator {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin: 0.5rem 0;
      padding: 0.8rem;
      background: #f8fafc;
      border-radius: 6px;
    }

    .phase-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }
  </style>
</head>
<body>
<header class="topbar">
  <a class="brand" href="index.html">EcoGear</a>
  <nav>
    <a href="shop-grid.html">Loja</a>
    <a href="sustainability-dashboard.html">Dashboard</a>
    <a href="carbon-footprint-calculator.html">Calculadora CO‚ÇÇ</a>
    <a href="certification-center.html">Certifica√ß√µes</a>
  </nav>
  <div class="top-actions">
    <span style="background: #22c55e; color: white; padding: 0.3rem 0.8rem; border-radius: 20px; font-weight: bold;">ECO AUDITOR</span>
  </div>
</header>

<main class="container">
  <div class="calculator-header">
    <h1>üßÆ Calculadora de Pegada de Carbono</h1>
    <p>Funcionalidade EXCLUSIVA para Auditores de Sustentabilidade</p>
    <div style="margin-top: 1rem; font-size: 1.1rem;">
      <strong>An√°lise cient√≠fica precisa do impacto ambiental</strong>
    </div>
  </div>

  <div class="calculator-workspace">
    <div class="input-panel">
      <h3>üìù Dados do Produto</h3>
      
      <form id="carbonCalculatorForm">
        <label>Material Principal
          <div class="material-selector">
            <div class="material-option" data-material="organic-cotton" data-factor="2.1">
              <div style="font-size: 1.5rem;">üå±</div>
              <div>Algod√£o Org√¢nico</div>
            </div>
            <div class="material-option" data-material="conventional-cotton" data-factor="5.9">
              <div style="font-size: 1.5rem;">üåæ</div>
              <div>Algod√£o Convencional</div>
            </div>
            <div class="material-option" data-material="polyester" data-factor="9.5">
              <div style="font-size: 1.5rem;">üß™</div>
              <div>Poli√©ster</div>
            </div>
            <div class="material-option" data-material="linen" data-factor="1.8">
              <div style="font-size: 1.5rem;">üåø</div>
              <div>Linho</div>
            </div>
            <div class="material-option" data-material="wool" data-factor="17.6">
              <div style="font-size: 1.5rem;">üêë</div>
              <div>L√£</div>
            </div>
            <div class="material-option" data-material="recycled" data-factor="1.2">
              <div style="font-size: 1.5rem;">‚ôªÔ∏è</div>
              <div>Reciclado</div>
            </div>
          </div>
        </label>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1.5rem 0;">
          <label>Peso (gramas)
            <input type="number" id="weight" placeholder="500" min="1" required>
          </label>
          <label>Quantidade
            <input type="number" id="quantity" placeholder="1" min="1" required>
          </label>
        </div>

        <label>Processo de Produ√ß√£o
          <select id="production" required>
            <option value="">Selecione</option>
            <option value="artisanal" data-factor="0.8">Artesanal (baixo impacto)</option>
            <option value="semi-industrial" data-factor="1.0">Semi-industrial</option>
            <option value="industrial" data-factor="1.5">Industrial (alto impacto)</option>
          </select>
        </label>

        <label>Dist√¢ncia de Transporte (km)
          <input type="number" id="distance" placeholder="1000" min="0" required>
        </label>

        <label>Tipo de Transporte
          <select id="transport" required>
            <option value="">Selecione</option>
            <option value="ship" data-factor="0.01">Navio (mais eficiente)</option>
            <option value="truck" data-factor="0.08">Caminh√£o</option>
            <option value="plane" data-factor="0.5">Avi√£o (maior impacto)</option>
          </select>
        </label>

        <button class="btn" type="submit" style="width: 100%; margin-top: 1.5rem;">
          üîç Calcular Pegada de Carbono
        </button>
      </form>
    </div>

    <div class="results-panel">
      <h3>üìä Resultados da An√°lise</h3>
      
      <div id="calculationResults" style="display: none;">
        <div class="carbon-result">
          <div style="font-size: 3rem; font-weight: bold; color: #22c55e; margin-bottom: 0.5rem;">
            <span id="carbonValue">4.2</span> kg CO‚ÇÇ
          </div>
          <div style="font-size: 1.1rem; margin-bottom: 1rem;">Pegada de carbono total</div>
          <div class="sustainability-score score-excellent" id="sustainabilityScore">
            EXCELENTE
          </div>
        </div>

        <div class="impact-visualization">
          <div class="impact-marker" id="impactMarker" style="left: 25%;"></div>
        </div>
        <div class="impact-scale">
          <span>Baixo Impacto</span>
          <span>M√©dio Impacto</span>
          <span>Alto Impacto</span>
        </div>

        <div class="comparison-chart">
          <h4>üìà Compara√ß√£o com M√©dias</h4>
          <div style="margin: 1rem 0;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
              <span>Sua pe√ßa:</span>
              <span style="font-weight: bold; color: #22c55e;" id="yourImpact">4.2 kg CO‚ÇÇ</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
              <span>M√©dia da categoria:</span>
              <span style="color: #666;">6.8 kg CO‚ÇÇ</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
              <span>Diferen√ßa:</span>
              <span style="font-weight: bold; color: #22c55e;" id="difference">-38% menor</span>
            </div>
          </div>
        </div>

        <div class="lifecycle-analysis">
          <h4>üîÑ An√°lise do Ciclo de Vida</h4>
          <div class="phase-indicator">
            <div class="phase-icon" style="background: #8b5cf6;">üè≠</div>
            <div>
              <strong>Produ√ß√£o:</strong> <span id="productionImpact">2.1 kg CO‚ÇÇ</span><br>
              <small>50% do impacto total</small>
            </div>
          </div>
          <div class="phase-indicator">
            <div class="phase-icon" style="background: #f59e0b;">üöõ</div>
            <div>
              <strong>Transporte:</strong> <span id="transportImpact">1.8 kg CO‚ÇÇ</span><br>
              <small>43% do impacto total</small>
            </div>
          </div>
          <div class="phase-indicator">
            <div class="phase-icon" style="background: #06b6d4;">üì¶</div>
            <div>
              <strong>Embalagem:</strong> <span id="packagingImpact">0.3 kg CO‚ÇÇ</span><br>
              <small>7% do impacto total</small>
            </div>
          </div>
        </div>

        <div style="margin-top: 2rem; display: flex; gap: 1rem;">
          <button class="btn" onclick="generateReport()">üìÑ Gerar Relat√≥rio</button>
          <button class="btn alt" onclick="saveToCertification()">üèÜ Salvar para Certifica√ß√£o</button>
        </div>
      </div>

      <div id="noResults" style="text-align: center; color: #666; margin-top: 3rem;">
        <div style="font-size: 3rem; margin-bottom: 1rem;">üå±</div>
        <p>Preencha os dados √† esquerda para calcular a pegada de carbono</p>
      </div>
    </div>
  </div>

  <section class="card">
    <h3>üéØ Metas de Sustentabilidade</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
      <div style="background: #f0fdf4; padding: 1.5rem; border-radius: 8px; text-align: center;">
        <div style="font-size: 2rem; font-weight: bold; color: #22c55e;">-50%</div>
        <div>Meta de Redu√ß√£o 2025</div>
      </div>
      <div style="background: #eff6ff; padding: 1.5rem; border-radius: 8px; text-align: center;">
        <div style="font-size: 2rem; font-weight: bold; color: #3b82f6;">89%</div>
        <div>Produtos Certificados</div>
      </div>
      <div style="background: #fef3c7; padding: 1.5rem; border-radius: 8px; text-align: center;">
        <div style="font-size: 2rem; font-weight: bold; color: #f59e0b;">156</div>
        <div>Auditorias Realizadas</div>
      </div>
    </div>
  </section>

  <section class="card">
    <h3>üî¨ Metodologia Cient√≠fica</h3>
    <p>Nossa calculadora utiliza:</p>
    <div style="background: #f8fafc; padding: 1.5rem; border-radius: 8px; margin: 1rem 0;">
      <ul style="margin: 0; padding-left: 1.5rem;">
        <li><strong>LCA (Life Cycle Assessment):</strong> An√°lise completa do ciclo de vida</li>
        <li><strong>Base de dados IPCC:</strong> Fatores de emiss√£o oficiais</li>
        <li><strong>ISO 14067:</strong> Padr√£o internacional para pegada de carbono</li>
        <li><strong>Cradle-to-gate:</strong> Da extra√ß√£o at√© a sa√≠da da f√°brica</li>
        <li><strong>Atualiza√ß√µes trimestrais:</strong> Dados sempre atualizados</li>
      </ul>
    </div>
  </section>
</main>

<script src="script.js"></script>
<script src="access-control-system.js"></script>
<script>
// Verifica√ß√£o de acesso exclusivo para auditores
if (!AccessControlSystem.hasExclusiveFeature('carbon_footprint_calculator')) {
  document.body.innerHTML = `
    <header class="topbar">
      <a class="brand" href="index.html">EcoGear</a>
    </header>
    <main class="container">
      <div class="card" style="text-align: center; padding: 3rem;">
        <h2>üîí Funcionalidade Exclusiva</h2>
        <p>A <strong>Calculadora de Pegada de Carbono</strong> √© exclusiva para <strong>Auditores de Sustentabilidade</strong>.</p>
        <p>Esta ferramenta utiliza metodologia cient√≠fica para an√°lise precisa de impacto ambiental.</p>
        <div style="background: #f0fdf4; padding: 1.5rem; border-radius: 8px; margin: 2rem 0;">
          <h4>Funcionalidades Exclusivas:</h4>
          <ul style="text-align: left; margin: 1rem 0;">
            <li>C√°lculo baseado em LCA (Life Cycle Assessment)</li>
            <li>Base de dados IPCC oficial</li>
            <li>An√°lise completa do ciclo de vida</li>
            <li>Gera√ß√£o de relat√≥rios cient√≠ficos</li>
            <li>Certifica√ß√£o de sustentabilidade</li>
          </ul>
        </div>
        <a href="user-type-selector.html" class="btn" style="margin-top: 1rem;">Testar como Auditor</a>
        <a href="index.html" class="btn alt" style="margin-top: 0.5rem;">Voltar ao In√≠cio</a>
      </div>
    </main>
  `;
}

// Sele√ß√£o de material
document.querySelectorAll('.material-option').forEach(option => {
  option.onclick = function() {
    document.querySelectorAll('.material-option').forEach(o => o.classList.remove('selected'));
    this.classList.add('selected');
  };
});

// Calculadora de carbono
document.getElementById('carbonCalculatorForm').onsubmit = function(e) {
  e.preventDefault();
  
  const selectedMaterial = document.querySelector('.material-option.selected');
  if (!selectedMaterial) {
    alert('Por favor, selecione um material.');
    return;
  }

  const materialFactor = parseFloat(selectedMaterial.getAttribute('data-factor'));
  const weight = parseFloat(document.getElementById('weight').value) || 500;
  const quantity = parseFloat(document.getElementById('quantity').value) || 1;
  const productionSelect = document.getElementById('production');
  const transportSelect = document.getElementById('transport');
  const distance = parseFloat(document.getElementById('distance').value) || 1000;

  if (!productionSelect.value || !transportSelect.value) {
    alert('Por favor, preencha todos os campos.');
    return;
  }

  const productionFactor = parseFloat(productionSelect.selectedOptions[0].getAttribute('data-factor'));
  const transportFactor = parseFloat(transportSelect.selectedOptions[0].getAttribute('data-factor'));

  // C√°lculo cient√≠fico simplificado
  const materialImpact = (weight / 1000) * materialFactor * productionFactor * quantity;
  const transportImpact = distance * transportFactor * quantity;
  const packagingImpact = 0.3 * quantity; // Estimativa fixa
  
  const totalImpact = materialImpact + transportImpact + packagingImpact;

  // Atualizar resultados
  document.getElementById('carbonValue').textContent = totalImpact.toFixed(1);
  document.getElementById('yourImpact').textContent = totalImpact.toFixed(1) + ' kg CO‚ÇÇ';
  document.getElementById('productionImpact').textContent = materialImpact.toFixed(1) + ' kg CO‚ÇÇ';
  document.getElementById('transportImpact').textContent = transportImpact.toFixed(1) + ' kg CO‚ÇÇ';
  document.getElementById('packagingImpact').textContent = packagingImpact.toFixed(1) + ' kg CO‚ÇÇ';

  // Calcular diferen√ßa da m√©dia (simulada)
  const averageImpact = 6.8;
  const difference = ((totalImpact - averageImpact) / averageImpact * 100);
  document.getElementById('difference').textContent = 
    difference < 0 ? `${Math.abs(difference).toFixed(0)}% menor` : `${difference.toFixed(0)}% maior`;
  document.getElementById('difference').style.color = difference < 0 ? '#22c55e' : '#ef4444';

  // Atualizar score de sustentabilidade
  const scoreElement = document.getElementById('sustainabilityScore');
  if (totalImpact < 3) {
    scoreElement.textContent = 'EXCELENTE';
    scoreElement.className = 'sustainability-score score-excellent';
  } else if (totalImpact < 5) {
    scoreElement.textContent = 'BOM';
    scoreElement.className = 'sustainability-score score-good';
  } else if (totalImpact < 8) {
    scoreElement.textContent = 'REGULAR';
    scoreElement.className = 'sustainability-score score-fair';
  } else {
    scoreElement.textContent = 'RUIM';
    scoreElement.className = 'sustainability-score score-poor';
  }

  // Atualizar marcador visual
  const markerPosition = Math.min((totalImpact / 15) * 100, 100);
  document.getElementById('impactMarker').style.left = markerPosition + '%';

  // Mostrar resultados
  document.getElementById('noResults').style.display = 'none';
  document.getElementById('calculationResults').style.display = 'block';
  document.getElementById('calculationResults').scrollIntoView({ behavior: 'smooth' });
};

function generateReport() {
  alert('Gerando relat√≥rio cient√≠fico de pegada de carbono (funcionalidade exclusiva)');
}

function saveToCertification() {
  alert('Salvando dados para processo de certifica√ß√£o ambiental (funcionalidade exclusiva)');
}
</script>
</body>
</html>